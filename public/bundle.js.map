{"version":3,"file":"bundle.js","mappings":"MAAA,IAAMA,EAASC,2CAEXC,EAAY,CACZC,eAAgB,SAAUC,GAAM,WAC5BC,MACI,6BAA+BD,EAAO,WAAaJ,GACjDM,MAAK,SAACC,GAAD,OAAcA,EAASC,UAC7BF,MAAK,SAACG,GAAD,OAAU,EAAKC,iBAAiBD,OAE9CE,cAAe,WAAY,WACvBN,MACI,yCAA2CL,GACzCM,MAAK,SAACC,GAAD,OAAcA,EAASC,UAC7BF,MAAK,SAACG,GAAD,OAAU,EAAKC,iBAAiBD,OAE9CC,iBAAkB,YAAiB,IAAPD,EAAO,EAAPA,KAChBG,EAAaH,EAAbG,IAAKC,EAAQJ,EAARI,IACLC,EAASL,EAAKL,KAAdU,KACAC,EAAMN,EAAKO,KAAXD,EACR,EAA+BN,EAAKQ,SAASC,MAAMC,KAAK,GAAhDC,EAAR,EAAQA,IAAKC,EAAb,EAAaA,IAAKC,EAAlB,EAAkBA,IAAKC,EAAvB,EAAuBA,IAEvBC,SAASC,cAAc,cAAcC,UAAYZ,EACjDU,SAASC,cAAc,aAAaC,UAAYd,EAChDY,SAASC,cAAc,aAAaC,UAAYb,EAChDW,SAASC,cAAc,cAAcC,UAAYX,EACjDS,SAASC,cAAc,kBAAkBC,UAAYL,EAAM,WAAaD,EAAM,UAAYE,EAAM,UAAYC,EAAM,MAEtHI,OAAQ,WACJC,KAAKzB,eAAeqB,SAASC,cAAc,eAAeI,SAsBlE,SAASC,IACL5B,EAAUS,gBAnBda,SAASC,cAAc,kBAAkBM,iBAAiB,SAAS,WAC/D7B,EAAUyB,YAGdH,SAASC,cAAc,eAAeM,iBAAiB,SAAS,SAASC,GACpD,SAAbA,EAAMC,KACN/B,EAAUyB,YAIlBO,OAAOH,iBAAiB,QAAQ,WACxBI,UAAUC,YACVD,UAAUC,YAAYC,mBAAmBP,GAEzCQ,QAAQC,IAAI,kC","sources":["webpack://app_inquinamento/./src/index.js"],"sourcesContent":["const apiKey = process.env.API_KEY;\r\n\r\nlet pollution = {\r\n    fetchPollution: function (city) {\r\n        fetch(\r\n            \"http://api.waqi.info/feed/\" + city + \"/?token=\" + apiKey\r\n            ).then((response) => response.json())\r\n            .then((data) => this.displayPollution(data));\r\n    },\r\n    fetchPosition: function () {\r\n        fetch(\r\n            \"http://api.waqi.info/feed/here/?token=\" + apiKey\r\n            ).then((response) => response.json())\r\n            .then((data) => this.displayPollution(data));\r\n    },\r\n    displayPollution: function({data}) {\r\n        const { idx, aqi } = data;\r\n        const { name } = data.city;\r\n        const { s } = data.time;\r\n        const { avg, day, max, min } = data.forecast.daily.pm25[0];\r\n        \r\n        document.querySelector(\".city span\").innerText = name;\r\n        document.querySelector(\".idx span\").innerText = idx;\r\n        document.querySelector(\".aqi span\").innerText = aqi;\r\n        document.querySelector(\".time span\").innerText = s;\r\n        document.querySelector(\".forecast span\").innerText = day + ' ( avg: ' + avg + ', max: ' + max + ', min: ' + min + ' )';\r\n    },  \r\n    search: function() {\r\n        this.fetchPollution(document.querySelector('.search-bar').value);\r\n    },\r\n};\r\n\r\ndocument.querySelector('.search button').addEventListener('click', function() {\r\n    pollution.search();\r\n});\r\n\r\ndocument.querySelector('.search-bar').addEventListener('keyup', function(event) {\r\n    if (event.key == \"Enter\") {\r\n        pollution.search();\r\n    };\r\n});\r\n\r\nwindow.addEventListener('load', () => {\r\n    if (navigator.geolocation) {\r\n        navigator.geolocation.getCurrentPosition(showPosition);\r\n    } else {\r\n        console.log('Geolocation is not allowed');\r\n    }\r\n});\r\n\r\nfunction showPosition() {\r\n    pollution.fetchPosition();\r\n}"],"names":["apiKey","process","pollution","fetchPollution","city","fetch","then","response","json","data","displayPollution","fetchPosition","idx","aqi","name","s","time","forecast","daily","pm25","avg","day","max","min","document","querySelector","innerText","search","this","value","showPosition","addEventListener","event","key","window","navigator","geolocation","getCurrentPosition","console","log"],"sourceRoot":""}