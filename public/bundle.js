(()=>{var e="04bea4f298ee565a8380474f24500f711ec3743f",n={fetchPollution:function(n){var t=this;fetch("http://api.waqi.info/feed/"+n+"/?token="+e).then((function(e){return e.json()})).then((function(e){return t.displayPollution(e)}))},fetchPosition:function(){var n=this;fetch("http://api.waqi.info/feed/here/?token="+e).then((function(e){return e.json()})).then((function(e){return n.displayPollution(e)}))},displayPollution:function(e){var n=e.data,t=n.idx,o=n.aqi,i=n.city.name,a=n.time.s,r=n.forecast.daily.pm25[0],c=r.avg,u=r.day,l=r.max,s=r.min;document.querySelector(".city span").innerText=i,document.querySelector(".idx span").innerText=t,document.querySelector(".aqi span").innerText=o,document.querySelector(".time span").innerText=a,document.querySelector(".forecast span").innerText=u+" ( avg: "+c+", max: "+l+", min: "+s+" )"},search:function(){this.fetchPollution(document.querySelector(".search-bar").value)}};function t(){n.fetchPosition()}document.querySelector(".search button").addEventListener("click",(function(){n.search()})),document.querySelector(".search-bar").addEventListener("keyup",(function(e){"Enter"==e.key&&n.search()})),window.addEventListener("load",(function(){navigator.geolocation?navigator.geolocation.getCurrentPosition(t):console.log("Geolocation is not allowed")}))})();
//# sourceMappingURL=bundle.js.map